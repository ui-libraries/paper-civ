<!--
	MedievalMillenniumMusicPlayer.htm
	Themed music for Medieval Millennium scenario, for Civilization II: Test of Time
		by Knighttime
		
	Opening this file in a web browser will provide an ad-free stream of curated medieval music
		selections from YouTube.
-->

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
	</head>
	<body>
		<script type="text/javascript">
			var tag = document.createElement('script');
			tag.src = "https://www.youtube.com/iframe_api";
			
			var firstScriptTag = document.getElementsByTagName('script')[0];
			firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
			
			var videoArray = [
				"_dV5b8AuLHg", 0, 403,
				"_qBjT-TyW3E", 4, 104,
				"_wX3jkm8q4M", 0, 262,
				"0IbsA319WSU", 0, 81,
				"0Qa4LgbixcU", 0, 172,
				"0UIbZCZafNE", 0, 278,
				"0UIbZCZafNE", 285, 543,
				"0yd5EE0hAB8", 5, 196,
				"15YOCI2XzbM", 3, 452,
				"1gEV42RKf6E", 17, 315,
				"1gEV42RKf6E", 317, 924,
				"1gEV42RKf6E", 928, 1282,
				"1gEV42RKf6E", 1288, 1592,
				"1gEV42RKf6E", 1598, 1766,
				"1gEV42RKf6E", 1768, 2340,
				"1gEV42RKf6E", 2344, 2494,
				"1gEV42RKf6E", 2498, 2785,
				"1gEV42RKf6E", 2791, 2996,
				"1gEV42RKf6E", 2998, 3168,
				"1gEV42RKf6E", 3179, 3256,
				"-1WtUrud2as", 0, 70,
				"26oWgey0ess", 2, 316,
				"2aEHfTf8LzI", 4, 140,
				"2e55kHFBPk4", 0, 237,
				"3iR3bJKk1Xc", 0, 94,
				"3sh9OqQ3HtM", 2, 151,
				"4esGXmuz4Qg", 0, 248,
				"4pa3Eozh3AA", 3, 199,
				"4pSBCJ2l_Pw", 7, 218,
				"4TvKDNK9aq4", 2, 800,
				"5oZsENK6Evg", 0, 825,
				"5Q0TMbdamqs", 0, 205,
				"-60f0tKgb1k", 0, 371,
				"6hdR1vbHL0Y", 0, 237,
				"7E_rKYkjSC4", 7, 143,
				"7fhkJc0-b2Y", 1, 259,
				"7JMNRxGtuqA", 5, 194,
				"7QvO2HyPH18", 5, 214,
				"7UvesKl8_W8", 0, 183,
				"8Z8rt3hHUEY", 0, 244,
				"9iTmdgfjYwk", 0, 272,
				"9kV3geloYzo", 0, 101,
				"-9KW3_d0064", 0, 304,
				"9ti59NdbG1c", 1, 340,
				"9UCF3_16S18", 0, 112,
				"9yo07PlUNs4", 0, 130,
				"a0eIKkMq88Q", 0, 168,
				"AjSyaOE-O8s", 0, 212,
				"AKpexxzR4Ak", 0, 224,
				"AovuMWAYRzo", 4, 485,
				"AS3bFmI13zQ", 1, 544,
				"avRaBZtBmrw", 0, 195,
				"AXA3rw1Gilw", 2, 455,
				"ay60I7196qo", 0, 112,
				"azh5SPmcJ_A", 0, 147,
				"b4FU8yz4BYY", 0, 107,
				"ba5LXi760D8", 0, 438,
				"bFLMKf5TNBs", 3, 400,
				"BLzoUBbHutU", 0, 106,
				"bqawmjrHdQI", 5, 172,
				"BSo8rRn-vEA", 0, 334,
				"BstgNDJsWh0", 0, 231,
				"bSth8RbeZyc", 0, 202,
				"BSyezf2hIjg", 0, 180,
				"bT5iZh-PodU", 0, 281,
				"btAc-uPlz2o", 0, 1093,
				"bTvYwoGdD8Y", 0, 312,
				"BXQuOQccCWA", 10, 105,
				"CC3JQndV3Nc", 0, 136,
				"CC3JQndV3Nc", 137, 600,
				"cCWoWgU1Y6c", 0, 189,
				"cCWoWgU1Y6c", 189, 545,
				"cCWoWgU1Y6c", 656, 754,
				"cCWoWgU1Y6c", 754, 867,
				"cCWoWgU1Y6c", 868, 1107,
				"cCWoWgU1Y6c", 1233, 1646,
				"cCWoWgU1Y6c", 1647, 1783,
				"cCWoWgU1Y6c", 1899, 2023,
				"cCWoWgU1Y6c", 2024, 2099,
				"cCWoWgU1Y6c", 2191, 2330,
				"cCWoWgU1Y6c", 2331, 2479,
				"Cd6-rqLBVaY", 0, 129,
				"cdaJKv2VJrQ", 3, 89,
				"cdaJKv2VJrQ", 90, 186,
				"cdaJKv2VJrQ", 187, 255,
				"CXf-6jFGyLU", 1, 125,
				"CyZTd1puy7k", 0, 201,
				"CzfAM__1poY", 0, 280,
				"dCaJwvHbW6E", 0, 140,
				"DEeAN471boQ", 0, 255,
				"DEeAN471boQ", 256, 480,
				"DEeAN471boQ", 481, 738,
				"DEeAN471boQ", 739, 971,
				"DEeAN471boQ", 972, 1120,
				"DEeAN471boQ", 1121, 1324,
				"DEeAN471boQ", 1325, 1564,
				"DEeAN471boQ", 1565, 1659,
				"DEeAN471boQ", 1660, 1918,
				"DEeAN471boQ", 1919, 2132,
				"DEeAN471boQ", 2133, 2340,
				"DEeAN471boQ", 2341, 2579,
				"DEeAN471boQ", 2580, 2826,
				"DEeAN471boQ", 2827, 3008,
				"DEeAN471boQ", 3009, 3222,
				"DEeAN471boQ", 3223, 3437,
				"DEeAN471boQ", 3438, 3670,
				"E6CVxtPcW78", 0, 53,
				"E8Mf-1A6YtE", 0, 336,
				"e8yoQTc4rnA", 0, 232,
				"EAdtlR1eTZs", 2, 128,
				"edRcpxJ7SOg", 0, 160,
				"eF8gIzyr5Kw", 9, 137,
				"eF8gIzyr5Kw", 142, 215,
				"EFFBaT_r6zU", 0, 168,
				"EFFBaT_r6zU", 169, 321,
				"EFFBaT_r6zU", 322, 510,
				"EFFBaT_r6zU", 512, 641,
				"ejoA9F6clxE", 5, 120,
				"EJVKCPfx-7s", 0, 309,
				"EMyWnCf2Anc", 0, 175,
				"EMyWnCf2Anc", 176, 220,
				"EMyWnCf2Anc", 221, 527,
				"EMyWnCf2Anc", 527, 582,
				"EMyWnCf2Anc", 582, 677,
				"eRXeBQWP0Tg", 2, 108,
				"eRXeBQWP0Tg", 109, 260,
				"eRXeBQWP0Tg", 261, 405,
				"eRXeBQWP0Tg", 413, 607,
				"eRXeBQWP0Tg", 614, 767,
				"eRXeBQWP0Tg", 773, 1124,
				"eRXeBQWP0Tg", 1130, 1400,
				"eRXeBQWP0Tg", 1406, 1573,
				"eRXeBQWP0Tg", 1575, 1901,
				"eRXeBQWP0Tg", 1902, 2050,
				"eRXeBQWP0Tg", 2640, 2762,
				"eRXeBQWP0Tg", 2768, 2921,
				"eRXeBQWP0Tg", 2922, 3092,
				"eRXeBQWP0Tg", 3093, 3276,
				"eRXeBQWP0Tg", 3284, 3442,
				"eRXeBQWP0Tg", 3444, 3573,
				"eSA-Uo4NkUI", 1, 183,
				"eSA-Uo4NkUI", 185, 360,
				"eSA-Uo4NkUI", 362, 540,
				"eSlgw4e619Y", 0, 252,
				"et88OtttMEA", 0, 99,
				"f0uh6xuUNJY", 0, 339,
				"fkLFhQJywfI", 0, 261,
				"fNWeq4nOy_k", 0, 189,
				"FvJ6xl3l1ek", 0, 244,
				"FzdPk4NUOF4", 6, 207,
				"G7hGhls5Wgk", 10, 222,
				"gb_7x9U0Im8", 0, 183,
				"gB-wdKvAAig", 4, 95,
				"GepxIN0XgOM", 3, 718,
				"GGRmSK52SRw", 0, 288,
				"glbYiXAwOWk", 0, 198,
				"GlpyCoXFh_U", 11, 350,
				"GLQC7vqgviE", 0, 354,
				"GnEgoNEHs68", 0, 128,
				"g-RDN8n3ZK0", 5, 340,
				"h01MgfrVGvE", 4, 137,
				"H9Zu8ghgqkk", 0, 82,
				"HBpvOFykQOk", 0, 67,
				"hLxwycS-m7c", 0, 477,
				"HMPXKqymD30", 16, 231,
				"h-mSmEfLmZc", 0, 228,
				"hnmbeNXzQlg", 0, 245,
				"hnzkK5D1jWc", 1, 85,
				"hriyxq9YGuE", 0, 280,
				"IKImxkeExAI", 3, 172,
				"iLKKwuirSoo", 0, 59,
				"ir0NCFzMS4M", 0, 182,
				"IrC8TxwNzVs", 0, 354,
				"Iu3_sC6oUUA", 0, 552,
				"IV8G9xdXhB4", 0, 339,
				"iZPHCikPJqs", 0, 150,
				"jA4OFI6t00Y", 14, 329,
				"jA4OFI6t00Y", 330, 547,
				"jA4OFI6t00Y", 548, 858,
				"jA4OFI6t00Y", 859, 1197,
				"jA4OFI6t00Y", 1198, 1456,
				"jA4OFI6t00Y", 1457, 1613,
				"jA4OFI6t00Y", 1614, 1782,
				"jkp2GHBRUiQ", 3, 317,
				"jqgmyXsKdOs", 0, 185,
				"JRKxvC7V6hM", 3, 351,
				"k3w7XKHQ4R8", 0, 135,
				"KA6oq_UYbyA", 0, 207,
				"KA6oq_UYbyA", 208, 273,
				"KA6oq_UYbyA", 274, 505,
				"KA6oq_UYbyA", 506, 609,
				"KA6oq_UYbyA", 610, 710,
				"Kdka1WN1c8c", 0, 594,
				"Ke2BuKG65Sw", 0, 199,
				"Ke2BuKG65Sw", 200, 448,
				"Ke2BuKG65Sw", 449, 625,
				"kFE41w4hX_s", 4, 142,
				"KhlCtF7JJ6Q", 0, 385,
				"KHzWAM70fx0", 0, 173,
				"Kn6eUemXtyA", 0, 415,
				"Kn6eUemXtyA", 416, 754,
				"Kn6eUemXtyA", 755, 990,
				"Kn6eUemXtyA", 991, 1215,
				"Kn6eUemXtyA", 1216, 1418,
				"Kn6eUemXtyA", 1419, 1590,
				"Kn6eUemXtyA", 1591, 1770,
				"Kn6eUemXtyA", 2460, 2795,
				"Kn6eUemXtyA", 2796, 2990,
				"Kn6eUemXtyA", 2991, 3281,
				"Kn6eUemXtyA", 3282, 3458,
				"Kn6eUemXtyA", 3459, 3514,
				"Kn6eUemXtyA", 3515, 3689,
				"kPESdIRRcTs", 0, 94,
				"KPK6nFIRKb4", 0, 222,
				"KpWljqUDd14", 0, 491,
				"-kwsbzWHoiw", 0, 619,
				"-kwsbzWHoiw", 626, 1174,
				"-kwsbzWHoiw", 1179, 1621,
				"-kwsbzWHoiw", 1625, 2095,
				"-kwsbzWHoiw", 2104, 2529,
				"L5BKG0Sbz3Q", 11, 155,
				"l78eG6pxxRM", 19, 246,
				"lbzw3B6jklU", 0, 327,
				"LkebzQpxNOY", 2, 133,
				"lOVsY1rxJB8", 6, 465,
				"LqdMiSCe-_A", 0, 268,
				"LUAgAF4Khmg", 0, 290,
				"lwl2wsPJM8c", 0, 292,
				"M0d4qM7gCH8", 0, 436,
				"Md7KEt4bXtQ", 0, 122,
				"MhMhdT7sbIw", 0, 143,
				"MYzdOdwdOmY", 1, 102,
				"N5a2oSzINK0", 1, 116,
				"N5exSCwrpsM", 2, 271,
				"ngCRm7uLirA", 0, 118,
				"NjL5vkBHTEo", 0, 204,
				"nK1cFDV_LWg", 0, 243,
				"NPYmHyv1KeE", 0, 354,
				"o50rh4_0_gk", 0, 241,
				"O5GtmcHZLHw", 13, 290,
				"o6lM4mqI_wQ", 0, 102,
				"o6lM4mqI_wQ", 103, 205,
				"o6lM4mqI_wQ", 206, 318,
				"o6lM4mqI_wQ", 319, 404,
				"o6lM4mqI_wQ", 405, 519,
				"o6lM4mqI_wQ", 520, 662,
				"o6lM4mqI_wQ", 663, 809,
				"P1RVRatBA94", 2, 245,
				"PbRivbCWooI", 0, 337,
				"pcmuOWV-6r0", 0, 120,
				"pGgB0bf2PHU", 0, 361,
				"pNs0-8ySCxk", 0, 101,
				"Pt8Ab5BXSNM", 0, 298,
				"qdCUyZ6PeF0", 10, 142,
				"QFqEjqUUPyw", 0, 333,
				"QWs9uSvq8oA", 0, 339,
				"R9tcg1VfKPs", 0, 896,
				"rtZji8QmvhY", 2, 316,
				"rUn81TBeyXc", 0, 156,
				"rxlwCTOuTSs", 0, 291,
				"RYxeQLb0Uk0", 0, 382,
				"rZDshqVPMbg", 1, 112,
				"sdzSPh2GocQ", 0, 599,
				"sFFAN1eTXA8", 0, 292,
				"sPLXonkqrYg", 0, 323,
				"TgWaz78yuGg", 0, 146,
				"TkP2Z73Rm7w", 0, 378,
				"tLZc7TUpgu0", 0, 479,
				"T-MpP1QiiJ8", 5, 187,
				"tMq9gQeFPbg", 0, 547,
				"tPfsHEgs_9E", 0, 255,
				"tUcCrmSdpkM", 0, 305,
				"tyGhW9JKOz8", 3, 421,
				"uH6l_Dr5hEc", 0, 559,
				"ui9tci8k3rU", 0, 342,
				"uwF_Mz-4D1Q", 0, 308,
				"UXpl2iygij0", 0, 57,
				"V7l517BNCts", 6, 281,
				"vaZJzu__424", 0, 173,
				"vlB1HR4BgUg", 3, 176,
				"vlB1HR4BgUg", 177, 437,
				"vlB1HR4BgUg", 438, 860,
				"vlB1HR4BgUg", 861, 1338,
				"vlB1HR4BgUg", 1339, 1763,
				"vnE8aE4Dc7g", 0, 121,
				"vOVooUhe82c", 2, 193,
				"VuRtcsvK5TU", 0, 99,
				"vxPB76pmWss", 13, 297,
				"vYrIwn1vxvI", 0, 286,
				"W2q4DkKyQns", 0, 856,
				"W7iAg2Irwcw", 0, 79,
				"WbktA3AMVA4", 7, 251,
				"WE_6WS95mZs", 3, 86,
				"WNm12wdtIQo", 0, 189,
				"wZhfy0P8S9U", 0, 443,
				"X5GT7exIXUU", 0, 221,
				"X5xoJfXT1LU", 0, 495,
				"xaRNvJLKP1E", 0, 264,
				"xaRNvJLKP1E", 265, 351,
				"xaRNvJLKP1E", 352, 667,
				"xaRNvJLKP1E", 668, 900,
				"xaRNvJLKP1E", 901, 1020,
				"xaRNvJLKP1E", 1021, 1316,
				"xaRNvJLKP1E", 1317, 1468,
				"xaRNvJLKP1E", 1469, 1527,
				"xaRNvJLKP1E", 1528, 1797,
				"xaRNvJLKP1E", 2039, 2201,
				"xaRNvJLKP1E", 2202, 2416,
				"xb7b4DiXxkI", 0, 132,
				"XImCWG8EYTI", 0, 250,
				"Xu3bYoLcyjo", 0, 597,
				"XWuUEx8ELjY", 0, 292,
				"XWuUEx8ELjY", 297, 640,
				"XWuUEx8ELjY", 645, 698,
				"XWuUEx8ELjY", 704, 1084,
				"XWuUEx8ELjY", 1090, 1543,
				"XWuUEx8ELjY", 1550, 1648,
				"XWuUEx8ELjY", 1649, 1787,
				"XWuUEx8ELjY", 1793, 1946,
				"XWuUEx8ELjY", 1953, 2004,
				"XWuUEx8ELjY", 2005, 2176,
				"XWuUEx8ELjY", 2185, 2222,
				"XWuUEx8ELjY", 2225, 2259,
				"XWuUEx8ELjY", 2263, 2332,
				"XWuUEx8ELjY", 2336, 2565,
				"XWuUEx8ELjY", 2570, 2719,
				"XWuUEx8ELjY", 2726, 2868,
				"XWuUEx8ELjY", 2875, 3108,
				"XWuUEx8ELjY", 3118, 3305,
				"XWuUEx8ELjY", 3306, 3644,
				"XWuUEx8ELjY", 3645, 3778,
				"XWuUEx8ELjY", 3785, 3888,
				"XWuUEx8ELjY", 3897, 4287,
				"Y3tE5VPZzqU", 0, 127,
				"y4GUjmSWflw", 2, 307,
				"y5bVfL6wdoI", 5, 244,
				"yBHg9T9j4qU", 0, 198,
				"YfbuP40bpiU", 0, 471,
				"YFFGXxyrK7w", 1, 326,
				"yI45Jeoj0UI", 6, 99,
				"YKtZujUfIHM", 7, 86,
				"YMxY21UJR-8", 0, 194,
				"yV7BY15fk2o", 0, 322,
				"yzW1P_v6-to", 0, 279,
				"yzXv7I-Zav8", 0, 196,
				"z4sH4kHgpYk", 0, 115,
				"ZFhGZghSDHI", 3, 938,
				"Z-Hoir0wnD0", 4, 373,
				"Zjt5oCmPvPo", 0, 108,
				"zn7nYBdhKiI", 0, 193,
				"ZTQbUZCZYOQ", 0, 596,
				"zU_UCOJROgo", 0, 144,
				"ZVJhMOVqEZ8", 6, 135,
				"zWmSxzH9fsI", 3, 422,
			];
			
			var videoArrayEntriesPlayed_All = [ "Sample" ];
			var videoIdsPlayed_LastN = [ "Sample" ];
			var uniqueVideoIdsBeforeReplay = 15;
			var videoPlayed = true;
			
			var player;

			function onYouTubeIframeAPIReady() {
				player = new YT.Player('player', {
					width: '480',
					height: '360',
					playerVars: {
						modestbranding: true
					},
					events: {
						'onReady': onPlayerReady,
						'onStateChange': onPlayerStateChange
					}
				});
			}
			
			function onPlayerReady(event) {
				var trackToPlay = getRandomTrack();
				if (trackToPlay == null) {
					alert("A valid video could not be loaded.");
				} else {
					player.loadVideoById({
						'videoId': videoArray[trackToPlay],
						'startSeconds': videoArray[trackToPlay + 1],
						'endSeconds': videoArray[trackToPlay + 2],
						'suggestedQuality': 'large'
					});
				}
			}
			
			function onPlayerStateChange(event) {
				console.log("onPlayerStateChange: " + event.data);
				if (event.data == YT.PlayerState.PLAYING) {
					videoPlayed = true;
				}
				if (videoPlayed == true && event.data == YT.PlayerState.ENDED) {
					var trackToPlay = getRandomTrack();
					if (trackToPlay == null) {
						alert("Another valid video could not be found.  Please reload this web page.");
					} else {
						player.loadVideoById({
							'videoId': videoArray[trackToPlay],
							'startSeconds': videoArray[trackToPlay + 1],
							'endSeconds': videoArray[trackToPlay + 2],
							'suggestedQuality': 'large'
						});
					}
				}
			}
	
			function getRandomTrack() {
				var numberOfTracks = videoArray.length / 3;
				var numberOfTracksTested = 0;
				var validArrayIndex = null;
				
				do {
					var randomArrayEntry = Math.floor(Math.random() * numberOfTracks) + 1;
					var randomArrayIndex = (randomArrayEntry  - 1) * 3;
					var newVideoId = videoArray[randomArrayIndex];
					numberOfTracksTested = numberOfTracksTested + 1;
					
					if (videoArrayEntriesPlayed_All.includes(randomArrayEntry) === false && videoIdsPlayed_LastN.includes(newVideoId) === false) {
						validArrayIndex = randomArrayIndex;
						
						if (videoArrayEntriesPlayed_All[0] === "Sample") {
							videoArrayEntriesPlayed_All[0] = randomArrayEntry;
						} else {
							videoArrayEntriesPlayed_All.push(randomArrayEntry);
						}
						
						if (videoIdsPlayed_LastN[0] === "Sample") {
							videoIdsPlayed_LastN[0] = newVideoId;
						} else {
							if (videoIdsPlayed_LastN.length == uniqueVideoIdsBeforeReplay) {
								videoIdsPlayed_LastN.shift();
							}
							videoIdsPlayed_LastN.push(newVideoId);
						}
					}
				}
				while (validArrayIndex == null && numberOfTracksTested <= (numberOfTracks * 10));
				
				if (validArrayIndex == null) {
					console.log("getRandomTrack : FAILURE");
					console.log("                 videoArrayEntriesPlayed_All = " + videoArrayEntriesPlayed_All.toString());
					console.log("                 videoIdsPlayed_LastN = " + videoIdsPlayed_LastN.toString());
				} else {
					console.log("getRandomTrack : SUCCESS : " + videoArray[validArrayIndex]);
					videoPlayed = false;
				}

				return validArrayIndex;
			}
			</script>
		<p><div style="font-size:200%;">Medieval Millennium Music Player</div><br/><div style="font-style: italic;">version 1.0</div></p>
		<p>Opening this file in a web browser will provide an ad-free stream of curated medieval music selections from YouTube.  (Internet access is required and data usage will occur.)</p>
		<p>This is intended to provide thematically appropriate background music to accompany Medieval Millennium, replacing the default music tracks distributed with Civilization II.</p>
		<p>Music selections will shuffle randomly.  Individual selections will not be repeated during a session.</p>
		<p>The availability of any individual selection or video is not guaranteed, since videos may be restricted or removed by YouTube and/or the content uploader at any time and for any reason.  The creator of Medieval Millennium does not have immediate or direct visibility to these changes.  Inclusion in this playlist should not be construed as any type of statement regarding the copyright of these works.</p>
		<p>Simply reload the web page to reinitialize the player if it stops working or generates an error message, or if an individual selection simply doesn't appeal.  However, note that doing so will reset the internal history of selections played, so tracks that had played previously would become eligible to be played again.</p>
		<br/>
		<p><div id="player"></div></p>
	</body>
</html>
